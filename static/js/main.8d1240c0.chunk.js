(this["webpackJsonpstore-juan-iessi"]=this["webpackJsonpstore-juan-iessi"]||[]).push([[0],{20:function(e,t,c){},27:function(e,t,c){"use strict";c.r(t);var n=c(0),r=c(1),s=c.n(r),a=c(13),i=c.n(a),o=(c(20),c(3)),u=c.n(o),j=c(4),l=c(5),d=c(8),b=c(9),p=function(){function e(){Object(d.a)(this,e)}return Object(b.a)(e,null,[{key:"getUser",value:function(){var e=Object(j.a)(u.a.mark((function e(){var t,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={"Content-Type":"application/json",Authorization:"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJfaWQiOiI1ZmNiYWQ2YjI2ZjdkMjAwMjA0MTE0YzUiLCJpYXQiOjE2MDcxODM3MjN9.BjtQYRlkAcjscJVLE08Zq57DgNBGP-t-Vekvw25Ffz0"},e.prev=1,e.next=4,fetch("https://coding-challenge-api.aerolab.co/user/me",{headers:t});case 4:if(200===(c=e.sent).status){e.next=7;break}throw new Error("Ups, something went wrong!");case 7:return e.next=9,c.json();case 9:return c=e.sent,e.abrupt("return",c);case 13:return e.prev=13,e.t0=e.catch(1),e.abrupt("return",!1);case 16:case 17:case"end":return e.stop()}}),e,null,[[1,13]])})));return function(){return e.apply(this,arguments)}}()},{key:"getHistory",value:function(){var e=Object(j.a)(u.a.mark((function e(){var t,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={"Content-Type":"application/json",Authorization:"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJfaWQiOiI1ZmNiYWQ2YjI2ZjdkMjAwMjA0MTE0YzUiLCJpYXQiOjE2MDcxODM3MjN9.BjtQYRlkAcjscJVLE08Zq57DgNBGP-t-Vekvw25Ffz0"},e.prev=1,e.next=4,fetch("https://coding-challenge-api.aerolab.co/user/history",{headers:t});case 4:if(200===(c=e.sent).status){e.next=7;break}throw new Error("Ups, something went wrong!");case 7:return e.next=9,c.json();case 9:return c=e.sent,e.abrupt("return",c);case 13:return e.prev=13,e.t0=e.catch(1),e.abrupt("return",!1);case 16:case 17:case"end":return e.stop()}}),e,null,[[1,13]])})));return function(){return e.apply(this,arguments)}}()},{key:"postCoins",value:function(){var e=Object(j.a)(u.a.mark((function e(t){var c,n,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c={"Content-Type":"application/json",Authorization:"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJfaWQiOiI1ZmNiYWQ2YjI2ZjdkMjAwMjA0MTE0YzUiLCJpYXQiOjE2MDcxODM3MjN9.BjtQYRlkAcjscJVLE08Zq57DgNBGP-t-Vekvw25Ffz0"},n={body:JSON.stringify({amount:t}),method:"post",mode:"cors",headers:c},e.prev=2,e.next=5,fetch("https://coding-challenge-api.aerolab.co/user/points",n);case 5:if(200===(r=e.sent).status){e.next=8;break}throw new Error("Ups, something went wrong!");case 8:return e.next=10,r.json();case 10:return r=e.sent,e.abrupt("return",r);case 14:return e.prev=14,e.t0=e.catch(2),e.abrupt("return",!1);case 17:case 18:case"end":return e.stop()}}),e,null,[[2,14]])})));return function(t){return e.apply(this,arguments)}}()}]),e}(),h=s.a.createContext();function O(e){var t=e.children,c=Object(r.useState)([]),s=Object(l.a)(c,2),a=s[0],i=s[1],o=Object(r.useState)({name:"",points:""}),d=Object(l.a)(o,2),b=d[0],O=d[1],x=function(){var e=Object(j.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.getUser();case 2:t=e.sent,O(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){return x()}),[]),Object(n.jsx)(h.Provider,{value:{user:b,products:a,setUser:O,setProducts:i},children:t})}var x=c.p+"static/media/aerolab-logo.0a8fb170.svg",f=c.p+"static/media/coin.b8bc711d.svg";var m=function(){var e=Object(r.useContext)(h).setUser,t=function(){var t=Object(j.a)(u.a.mark((function t(c){var n;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,p.postCoins(c);case 2:return t.next=4,p.getUser();case 4:n=t.sent,e(n),alert("Added ".concat(c," coins."));case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(n.jsxs)("div",{className:"more-coins",children:[Object(n.jsxs)("button",{className:"add-coins",onClick:function(){return t(1e3)},children:["+ 1000",Object(n.jsx)("img",{className:"img-coin",alt:"Coin",src:f})]}),Object(n.jsxs)("button",{className:"add-coins",onClick:function(){return t(5e3)},children:["+ 5000",Object(n.jsx)("img",{className:"img-coin",alt:"Coin",src:f})]}),Object(n.jsxs)("button",{className:"add-coins",onClick:function(){return t(7500)},children:["+ 7500",Object(n.jsx)("img",{className:"img-coin",alt:"Coin",src:f})]})]})},v=c(7),g=c(6);var N=function(){var e=Object(r.useContext)(h),t=e.user,c=t.name,s=t.points,a=e.products,i=e.setProducts,o=Object(r.useState)(!1),d=Object(l.a)(o,2),b=d[0],O=d[1],N=Object(r.useState)(null),w=Object(l.a)(N,2),k=w[0],y=w[1],I=Object(r.useState)([]),C=Object(l.a)(I,2),J=C[0],M=C[1],E=function(){var e=Object(j.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.getHistory();case 2:t=e.sent,a!==t&&M(a),i(k?t:J);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){null!=k&&E()}),[k]),Object(n.jsxs)("div",{children:[Object(n.jsxs)("div",{className:"header-bar",children:[Object(n.jsx)("img",{src:x,alt:"Barrilete de aerolab"}),Object(n.jsxs)("div",{className:"user",children:[Object(n.jsx)("h3",{children:c}),Object(n.jsx)("button",{className:"header-button",onClick:function(){y(!k)},title:"see ".concat(c," history"),children:!1===k?Object(n.jsx)(v.a,{icon:g.b}):Object(n.jsx)(v.a,{icon:g.c})}),Object(n.jsxs)("div",{className:"user-coin",title:"Add more coins",onClick:function(){O(!b)},children:[Object(n.jsx)("span",{className:"cant-coin",children:s}),Object(n.jsx)("img",{className:"icon-coin",src:f,alt:"Monedas"})]})]})]}),!1===b?"":Object(n.jsx)(m,{})]})},w=c.p+"static/media/header-x1.b6f067c6.png";var k=function(){var e=Object(r.useContext)(h),t=e.user.redeemHistory,c=e.products;return Object(n.jsxs)("div",{className:"header-img",children:[Object(n.jsx)("img",{className:"img-electronics",src:w,alt:"Electronics Header"}),Object(n.jsx)("h1",{children:c.toString()===t.toString()?"Redeem history":"Electronics"})," "]})};var y=function(){return Object(n.jsxs)("div",{children:[Object(n.jsx)(N,{}),Object(n.jsx)(k,{})]})},I=c.p+"static/media/arrow-right.3306c112.svg",C=c.p+"static/media/arrow-left.e6eb9be1.svg",J=[{callback:function(e,t){return e._id<t._id?-1:1},wording:"Most recent"},{callback:function(e,t){return e.cost-t.cost},wording:"Lowest price"},{callback:function(e,t){return t.cost-e.cost},wording:"Highest price"}];var M=function(e){var t=e.products,c=e.setProducts,s=e.hidden,a=Object(r.useState)(0),i=Object(l.a)(a,2),o=i[0],u=i[1];return Object(n.jsxs)("div",{className:"filter",children:[Object(n.jsxs)("div",{className:"buttons-board",children:[Object(n.jsx)("span",{className:"prod-quant",children:"16 of 32 products"}),Object(n.jsxs)("div",{className:"sort ".concat(s?"hidden":""),children:[Object(n.jsx)("span",{className:"sort-by",children:"Sort by:"}),Object(n.jsxs)("p",{className:"sort-controls-ctn",children:[J.map((function(e,r){var s=e.callback,a=e.wording;return Object(n.jsx)("button",{className:"filter-btn ".concat(o===r?"active":""),onClick:function(){return function(e,n){var r=t.slice().sort(n);c(r),u(e)}(r,s)},children:a},r)}))," "]})]})]}),Object(n.jsxs)("div",{className:"move-btn",children:[Object(n.jsx)("button",{className:"arrow-btn",children:Object(n.jsx)("img",{src:C,alt:"Flecha izquierda"})}),Object(n.jsx)("button",{className:"arrow-btn",children:Object(n.jsx)("img",{src:I,alt:"Flecha derecha"})})]})]})},E=c(14),Y=c.p+"static/media/buy-white.9b6e6567.svg",A=function(){function e(){Object(d.a)(this,e)}return Object(b.a)(e,null,[{key:"getProducts",value:function(){var e=Object(j.a)(u.a.mark((function e(){var t,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={"Content-Type":"application/json",Authorization:"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJfaWQiOiI1ZmNiYWQ2YjI2ZjdkMjAwMjA0MTE0YzUiLCJpYXQiOjE2MDcxODM3MjN9.BjtQYRlkAcjscJVLE08Zq57DgNBGP-t-Vekvw25Ffz0"},e.prev=1,e.next=4,fetch("https://coding-challenge-api.aerolab.co/products",{headers:t});case 4:if(200===(c=e.sent).status){e.next=7;break}throw new Error("Ups, something went wrong!");case 7:return e.next=9,c.json();case 9:return c=e.sent,e.abrupt("return",c);case 13:return e.prev=13,e.t0=e.catch(1),e.abrupt("return",!1);case 16:case 17:case"end":return e.stop()}}),e,null,[[1,13]])})));return function(){return e.apply(this,arguments)}}()},{key:"postRedeem",value:function(){var e=Object(j.a)(u.a.mark((function e(t){var c,n,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c={"Content-Type":"application/json",Authorization:"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJfaWQiOiI1ZmNiYWQ2YjI2ZjdkMjAwMjA0MTE0YzUiLCJpYXQiOjE2MDcxODM3MjN9.BjtQYRlkAcjscJVLE08Zq57DgNBGP-t-Vekvw25Ffz0"},n={body:JSON.stringify({productId:t}),method:"post",mode:"cors",headers:c},e.prev=2,e.next=5,fetch("https://coding-challenge-api.aerolab.co/redeem",n);case 5:if(200===(r=e.sent).status){e.next=8;break}throw new Error("Ups, something went wrong!");case 8:return e.next=10,r.json();case 10:return r=e.sent,e.abrupt("return",r);case 14:return e.prev=14,e.t0=e.catch(2),e.abrupt("return",!1);case 17:case 18:case"end":return e.stop()}}),e,null,[[2,14]])})));return function(t){return e.apply(this,arguments)}}()}]),e}();var U=function(e){var t=Object(r.useContext)(h).setUser,c=e.cost,s=e.id,a=function(){var e=Object(j.a)(u.a.mark((function e(){var c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.postRedeem(s);case 2:return e.sent,e.next=5,p.getUser();case 5:c=e.sent,t(c);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(n.jsxs)("div",{className:"hover-card",children:[Object(n.jsx)("img",{className:"buy-bag",src:Y,alt:"comprar"}),Object(n.jsxs)("div",{className:"cost",children:[Object(n.jsx)("span",{className:"cant-coin",children:c}),Object(n.jsx)("img",{className:"coin",src:f,alt:"coin"})]}),Object(n.jsx)("button",{className:"redeem-btn",onClick:a,children:"Redeem now"})]})},z=c.p+"static/media/buy-blue.c5c4f01c.svg";var Q=function(e){var t=e._id,c=e.category,s=e.cost,a=e.img,i=e.name,o=Object(r.useContext)(h).user.points;return Object(n.jsxs)("div",{className:"product-card",children:[s<o&&Object(n.jsx)(U,{cost:s,id:t}),Object(n.jsxs)("div",{className:"images-ctn",children:[o>s?Object(n.jsx)("img",{src:z,alt:"buy-icon",className:"buy-icon"}):Object(n.jsxs)("div",{className:"buy-icon cant-buy",children:[Object(n.jsx)("h3",{className:"missing-coins",children:"You need ".concat(s-o)}),Object(n.jsx)("img",{src:f,alt:"coin",className:"coin"})]}),Object(n.jsx)("img",{src:a.url,alt:i,className:"prod-img"})]}),Object(n.jsxs)("div",{className:"text-box",children:[Object(n.jsx)("h4",{className:"prod-category",children:c}),Object(n.jsx)("h3",{className:"prod-name",children:i})]})]})};var B=function(e){var t=e.success;return Object(n.jsxs)("div",{className:"success-container",children:[Object(n.jsx)(v.a,{icon:t?g.d:g.a}),Object(n.jsx)("h3",{children:"Success!!"}),Object(n.jsx)("button",{children:"OK"})]})};var D=function(e){var t=e.products;return Object(n.jsxs)("div",{className:"products-galery",children:[t.map((function(e,t){return Object(n.jsx)(Q,Object(E.a)({},e),e._id+t)}))," ",Object(n.jsx)(B,{success:!0})]})};var V=function(){var e=Object(r.useContext)(h),t=e.products,c=e.setProducts,s=function(){var e=Object(j.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.getProducts();case 2:t=e.sent,c(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(r.useEffect)(s,[]),Object(n.jsxs)("div",{children:[Object(n.jsx)(M,{products:t,setProducts:c,hidden:!1})," ",Object(n.jsx)(D,{products:t})," ",Object(n.jsx)(M,{products:t,setProducts:c,hidden:!0})]})};var Z=function(){return Object(n.jsx)("div",{children:Object(n.jsxs)(O,{children:[Object(n.jsx)(y,{}),Object(n.jsx)(V,{})]})})};i.a.render(Object(n.jsx)(s.a.StrictMode,{children:Object(n.jsx)(Z,{})}),document.getElementById("root"))}},[[27,1,2]]]);
//# sourceMappingURL=main.8d1240c0.chunk.js.map